{"remainingRequest":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\node_modules\\babel-loader\\lib\\index.js!C:\\Java\\Java-Code\\healthy\\vue-healthy\\src\\router\\index.js","dependencies":[{"path":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\src\\router\\index.js","mtime":1625907308827},{"path":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IEdlbmVyYXRlUm91dGVzIH0gZnJvbSAnQC91dGlscy9tZW51cyc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKZXhwb3J0IHZhciBjb25zdGFudFJvdXRlcyA9IFt7CiAgcGF0aDogJy9sb2dpbicsCiAgbmFtZTogJ2xvZ2luJywKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoJ0Avdmlld3MvTG9naW4udnVlJyk7CiAgfSwKICBoaWRkZW46IHRydWUKfSwgewogIHBhdGg6ICcvaG9tZScsCiAgbmFtZTogJ2hvbWUnLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnQC92aWV3cy9Ib21lLnZ1ZScpOwogIH0KfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICByb3V0ZXM6IGNvbnN0YW50Um91dGVzLAogIG1vZGU6ICdoYXNoJyAvL+eUqGhpc3Rvcnkg55Sf5Lqn546v5aKD6YWN5ZCIbmdpbngKCn0pOwoKZnVuY3Rpb24gZm9ybWF0TW5ldXMobWVudXMpIHsKICB2YXIgYXJyID0gW107CiAgbWVudXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0uY2hpbGRyZW4gIT09IG51bGwpIHsKICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgaS5jb21wb25lbnQgPSBsb2FkVmlldyhpLmNvbXBvbmVudCk7CiAgICAgICAgYXJyLnB1c2goaSk7CiAgICAgIH0pOwogICAgfQogIH0pOwogIHJldHVybiBhcnI7Cn0KCmV4cG9ydCB2YXIgbG9hZFZpZXcgPSBmdW5jdGlvbiBsb2FkVmlldyh2aWV3KSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICByZXR1cm4gcmVxdWlyZShbIkAvdmlld3MvIi5jb25jYXQodmlldywgIi52dWUiKV0sIHJlc29sdmUpOwogIH07Cn07Ci8qKgogKiDmjILovb3ot6/nlLHlr7zoiKrlrojljasKICogdG865bCG6KaB6K6/6Zeu55qE6Lev5b6ECiAqIGZyb2065LuO5ZOq6YeM6K6/6Zeu55qE6Lev5b6ECiAqIG5leHQ65LmL5ZCO6KaB5YGa55qE5Lu75Yqh77yM5piv5LiA5Liq5Ye95pWwCiAqIG5leHTvvIjvvInmlL7ooYzvvIwgbmV4dO+8iCcvVVJMJ++8ieW8uuWItui3s+i9rOeahOi3r+W+hOOAggogKi8KCnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIC8vIOiOt+WPlnRva2VuCiAgdmFyIHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicpIHsKICAgICAgbmV4dCgnL2hvbWUnKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICghc3RvcmUuc3RhdGUucm9sZXMgfHwgc3RvcmUuc3RhdGUucm9sZXMubGVuZ3RoIDwgMSkgewogICAgICAgIC8v6I635Y+W55So5oi35Z+65pys5L+h5oGvCiAgICAgICAgYXhpb3MuZ2V0KCcvdXNlci9nZXRMb2dpbkluZm8nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciB1c2VyID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpOyAvL+adg+mZkOS/oeaBrwoKICAgICAgICAgIGlmICh1c2VyLmF1dGhvcml0aWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIHJvbGVzID0gW107CiAgICAgICAgICAgIHVzZXIuYXV0aG9yaXRpZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIHJvbGVzLnB1c2goaXRlbS5hdXRob3JpdHkpOwogICAgICAgICAgICB9KTsgLy/mt7vliqDop5LoibLkv6Hmga8KCiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0Um9sZXMnLCByb2xlcyk7CiAgICAgICAgICAgIHZhciBwcmVtaXNzaW9uID0gW107CiAgICAgICAgICAgIHVzZXIucHJlbWlzc2lvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcHJlbWlzc2lvbi5wdXNoKGl0ZW0uYXV0aG9yaXR5KTsKICAgICAgICAgICAgfSk7IC8v5re75Yqg5p2D6ZmQ5qCH6K+GCgogICAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldFByZW1pc3Npb24nLCBwcmVtaXNzaW9uKTsKICAgICAgICAgIH0gLy/mt7vliqDnlKjmiLfln7rmnKzkv6Hmga8KCgogICAgICAgICAgc3RvcmUuY29tbWl0KCdzZXRVc2VyTmFtZScsIHVzZXIubmlja05hbWUpOwogICAgICAgICAgc3RvcmUuY29tbWl0KCdzZXRBdmF0YXInLCB1c2VyLmF2YXRhclVybCk7IC8v5Y+R6YCB6I635Y+W6I+c5Y2V5L+h5oGv6K+35rGCCgogICAgICAgICAgYXhpb3MuZ2V0KCcvc3lzdGVtL21lbnUvZmluZE1lbnUnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgLy/lsIboj5zljZXkv6Hmga/ovazmjaLmiJAg6Lev55Sx5L+h5oGvCiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0Um91dGVzJywgcmVzLmRhdGEpOwogICAgICAgICAgICB2YXIgbWVudXMgPSBmb3JtYXRNbmV1cyhyZXMuZGF0YSk7CiAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoW3sKICAgICAgICAgICAgICBwYXRoOiAnL2hvbWUnLAogICAgICAgICAgICAgIG5hbWU6ICdob21lJywKICAgICAgICAgICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpbXBvcnQoJ0Avdmlld3MvSG9tZS52dWUnKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNoaWxkcmVuOiBtZW51cwogICAgICAgICAgICB9XSk7IC8vcm91dGVyLm9wdGlvbnMucm91dGVzWzFdLmNoaWxkcmVuID0gbWVudXM7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhyb3V0ZXIpOwogICAgICAgICAgfSk7CiAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgcGF0aDogdG8ucGF0aCwKICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgbmV4dCgnL2hvbWUnKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KCk7CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgIG5leHQoKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5mdWxsUGF0aCkpOwogICAgfQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:/Java/Java-Code/healthy/vue-healthy/src/router/index.js"],"names":["Vue","VueRouter","store","axios","GenerateRoutes","use","constantRoutes","path","name","component","hidden","router","routes","mode","formatMneus","menus","arr","forEach","item","children","i","loadView","push","view","resolve","require","beforeEach","to","from","next","token","sessionStorage","getItem","state","roles","length","get","then","res","user","data","console","log","authorities","authority","commit","premission","nickName","avatarUrl","addRoutes","replace","catch","err","fullPath"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '@/store';\nimport axios from \"axios\";\n\nimport { GenerateRoutes } from '@/utils/menus';\n\nVue.use(VueRouter);\n\nexport const constantRoutes = [\n    {\n        path: '/login',\n        name: 'login',\n        component: () => import('@/views/Login.vue'),\n        hidden: true\n    },\n    {\n        path: '/home',\n        name: 'home',\n        component: () => import('@/views/Home.vue'),\n    },\n];\n\nconst router = new VueRouter({\n    routes: constantRoutes,\n    mode: 'hash' //用history 生产环境配合nginx\n});\n\nfunction formatMneus(menus) {\n    let arr = [];\n    menus.forEach(item => {\n        if (item.children !== null) {\n            item.children.forEach(i => {\n                i.component = loadView(i.component);\n                arr.push(i);\n            });\n        }\n    });\n    return arr;\n}\n\nexport const loadView = (view) => {\n    return (resolve) => require([`@/views/${view}.vue`], resolve);\n}\n\n/**\n * 挂载路由导航守卫\n * to:将要访问的路径\n * from:从哪里访问的路径\n * next:之后要做的任务，是一个函数\n * next（）放行， next（'/URL'）强制跳转的路径。\n */\nrouter.beforeEach((to, from, next) => {\n    // 获取token\n    const token = sessionStorage.getItem('token');\n    if (token) {\n        if (to.path === '/login') {\n            next('/home');\n        } else {\n            if (!store.state.roles || store.state.roles.length < 1) {\n                //获取用户基本信息\n                axios.get('/user/getLoginInfo').then((res) => {\n                    const user = res.data.data;\n                    console.log(user);\n                    //权限信息\n                    if (user.authorities.length > 0) {\n                        let roles = [];\n                        user.authorities.forEach(item => {\n                            roles.push(item.authority);\n                        });\n                        //添加角色信息\n                        store.commit('setRoles', roles);\n                        let premission = [];\n                        user.premission.forEach(item => {\n                            premission.push(item.authority);\n                        });\n                        //添加权限标识\n                        store.commit('setPremission', premission);\n                    }\n                    //添加用户基本信息\n                    store.commit('setUserName', user.nickName);\n                    store.commit('setAvatar', user.avatarUrl);\n                    //发送获取菜单信息请求\n                    axios.get('/system/menu/findMenu').then((res) => {\n                        //将菜单信息转换成 路由信息\n                        store.commit('setRoutes', res.data);\n                        const menus = formatMneus(res.data);\n                        router.addRoutes([\n                            {\n                                path: '/home',\n                                name: 'home',\n                                component: () => import('@/views/Home.vue'),\n                                children: menus\n                            },\n                        ]);\n                        //router.options.routes[1].children = menus;\n                        console.log(router);\n                    });\n                    next({ path: to.path, replace: true });\n                }).catch((err) => {\n                    next('/home');\n                });\n            } else {\n                next();\n            }\n        }\n    } else {\n        if (to.path === '/login') {\n            next();\n        } else {\n            next(`/login?redirect=${to.fullPath}`);\n        }\n    }\n});\n\n\n\nexport default router\n"]}]}