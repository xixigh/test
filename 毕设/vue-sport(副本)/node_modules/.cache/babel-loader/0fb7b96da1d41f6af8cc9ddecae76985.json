{"remainingRequest":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/babel-loader/lib/index.js!/home/umlinux/IdeaProjects/毕设/vue-sport/src/router/index.js","dependencies":[{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/src/router/index.js","mtime":1625907518000},{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgR2VuZXJhdGVSb3V0ZXMgfSBmcm9tICdAL3V0aWxzL21lbnVzJzsKVnVlLnVzZShWdWVSb3V0ZXIpOwpleHBvcnQgdmFyIGNvbnN0YW50Um91dGVzID0gW3sKICBwYXRoOiAnL2xvZ2luJywKICBuYW1lOiAnbG9naW4nLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnQC92aWV3cy9Mb2dpbi52dWUnKTsKICB9LAogIGhpZGRlbjogdHJ1ZQp9LCB7CiAgcGF0aDogJy9ob21lJywKICBuYW1lOiAnaG9tZScsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCdAL3ZpZXdzL0hvbWUudnVlJyk7CiAgfQp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIHJvdXRlczogY29uc3RhbnRSb3V0ZXMsCiAgbW9kZTogJ2hhc2gnIC8v55SoaGlzdG9yeSDnlJ/kuqfnjq/looPphY3lkIhuZ2lueAoKfSk7CgpmdW5jdGlvbiBmb3JtYXRNbmV1cyhtZW51cykgewogIHZhciBhcnIgPSBbXTsKICBtZW51cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbS5jaGlsZHJlbiAhPT0gbnVsbCkgewogICAgICBpdGVtLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICBpLmNvbXBvbmVudCA9IGxvYWRWaWV3KGkuY29tcG9uZW50KTsKICAgICAgICBhcnIucHVzaChpKTsKICAgICAgfSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGFycjsKfQoKZXhwb3J0IHZhciBsb2FkVmlldyA9IGZ1bmN0aW9uIGxvYWRWaWV3KHZpZXcpIHsKICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHJldHVybiByZXF1aXJlKFsiQC92aWV3cy8iLmNvbmNhdCh2aWV3LCAiLnZ1ZSIpXSwgcmVzb2x2ZSk7CiAgfTsKfTsKLyoqCiAqIOaMgui9vei3r+eUseWvvOiIquWuiOWNqwogKiB0bzrlsIbopoHorr/pl67nmoTot6/lvoQKICogZnJvbTrku47lk6rph4zorr/pl67nmoTot6/lvoQKICogbmV4dDrkuYvlkI7opoHlgZrnmoTku7vliqHvvIzmmK/kuIDkuKrlh73mlbAKICogbmV4dO+8iO+8ieaUvuihjO+8jCBuZXh077yIJy9VUkwn77yJ5by65Yi26Lez6L2s55qE6Lev5b6E44CCCiAqLwoKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8g6I635Y+WdG9rZW4KICB2YXIgdG9rZW4gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICBpZiAodG9rZW4pIHsKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICBuZXh0KCcvaG9tZScpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFzdG9yZS5zdGF0ZS5yb2xlcyB8fCBzdG9yZS5zdGF0ZS5yb2xlcy5sZW5ndGggPCAxKSB7CiAgICAgICAgLy/ojrflj5bnlKjmiLfln7rmnKzkv6Hmga8KICAgICAgICBheGlvcy5nZXQoJy91c2VyL2dldExvZ2luSW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIHVzZXIgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgY29uc29sZS5sb2codXNlcik7IC8v5p2D6ZmQ5L+h5oGvCgogICAgICAgICAgaWYgKHVzZXIuYXV0aG9yaXRpZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgcm9sZXMgPSBbXTsKICAgICAgICAgICAgdXNlci5hdXRob3JpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcm9sZXMucHVzaChpdGVtLmF1dGhvcml0eSk7CiAgICAgICAgICAgIH0pOyAvL+a3u+WKoOinkuiJsuS/oeaBrwoKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdzZXRSb2xlcycsIHJvbGVzKTsKICAgICAgICAgICAgdmFyIHByZW1pc3Npb24gPSBbXTsKICAgICAgICAgICAgdXNlci5wcmVtaXNzaW9uLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICBwcmVtaXNzaW9uLnB1c2goaXRlbS5hdXRob3JpdHkpOwogICAgICAgICAgICB9KTsgLy/mt7vliqDmnYPpmZDmoIfor4YKCiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0UHJlbWlzc2lvbicsIHByZW1pc3Npb24pOwogICAgICAgICAgfSAvL+a3u+WKoOeUqOaIt+WfuuacrOS/oeaBrwoKCiAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldFVzZXJOYW1lJywgdXNlci5uaWNrTmFtZSk7CiAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldEF2YXRhcicsIHVzZXIuYXZhdGFyVXJsKTsgLy/lj5HpgIHojrflj5boj5zljZXkv6Hmga/or7fmsYIKCiAgICAgICAgICBheGlvcy5nZXQoJy9zeXN0ZW0vbWVudS9maW5kTWVudScpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAvL+WwhuiPnOWNleS/oeaBr+i9rOaNouaIkCDot6/nlLHkv6Hmga8KICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdzZXRSb3V0ZXMnLCByZXMuZGF0YSk7CiAgICAgICAgICAgIHZhciBtZW51cyA9IGZvcm1hdE1uZXVzKHJlcy5kYXRhKTsKICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhbewogICAgICAgICAgICAgIHBhdGg6ICcvaG9tZScsCiAgICAgICAgICAgICAgbmFtZTogJ2hvbWUnLAogICAgICAgICAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydCgnQC92aWV3cy9Ib21lLnZ1ZScpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2hpbGRyZW46IG1lbnVzCiAgICAgICAgICAgIH1dKTsKICAgICAgICAgIH0pOwogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIG5leHQoJy9ob21lJyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICBuZXh0KCk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8uZnVsbFBhdGgpKTsKICAgIH0KICB9Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/home/umlinux/IdeaProjects/毕设/vue-sport/src/router/index.js"],"names":["Vue","VueRouter","store","axios","GenerateRoutes","use","constantRoutes","path","name","component","hidden","router","routes","mode","formatMneus","menus","arr","forEach","item","children","i","loadView","push","view","resolve","require","beforeEach","to","from","next","token","sessionStorage","getItem","state","roles","length","get","then","res","user","data","console","log","authorities","authority","commit","premission","nickName","avatarUrl","addRoutes","err","fullPath"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '@/store';\nimport axios from \"axios\";\n\nimport { GenerateRoutes } from '@/utils/menus';\n\nVue.use(VueRouter);\n\nexport const constantRoutes = [\n    {\n        path: '/login',\n        name: 'login',\n        component: () => import('@/views/Login.vue'),\n        hidden: true\n    },\n    {\n        path: '/home',\n        name: 'home',\n        component: () => import('@/views/Home.vue'),\n    },\n];\n\nconst router = new VueRouter({\n    routes: constantRoutes,\n    mode: 'hash' //用history 生产环境配合nginx\n});\n\nfunction formatMneus(menus) {\n    let arr = [];\n    menus.forEach(item => {\n        if (item.children !== null) {\n            item.children.forEach(i => {\n                i.component = loadView(i.component);\n                arr.push(i);\n            });\n        }\n    });\n    return arr;\n}\n\nexport const loadView = (view) => {\n    return (resolve) => require([`@/views/${view}.vue`], resolve);\n}\n\n/**\n * 挂载路由导航守卫\n * to:将要访问的路径\n * from:从哪里访问的路径\n * next:之后要做的任务，是一个函数\n * next（）放行， next（'/URL'）强制跳转的路径。\n */\nrouter.beforeEach((to, from, next) => {\n    // 获取token\n    const token = sessionStorage.getItem('token');\n    if (token) {\n        if (to.path === '/login') {\n            next('/home');\n        } else {\n            if (!store.state.roles || store.state.roles.length < 1) {\n                //获取用户基本信息\n                axios.get('/user/getLoginInfo').then((res) => {\n                    const user = res.data.data;\n                    console.log(user);\n                    //权限信息\n                    if (user.authorities.length > 0) {\n                        let roles = [];\n                        user.authorities.forEach(item => {\n                            roles.push(item.authority);\n                        });\n                        //添加角色信息\n                        store.commit('setRoles', roles);\n                        let premission = [];\n                        user.premission.forEach(item => {\n                            premission.push(item.authority);\n                        });\n                        //添加权限标识\n                        store.commit('setPremission', premission);\n                    }\n                    //添加用户基本信息\n                    store.commit('setUserName', user.nickName);\n                    store.commit('setAvatar', user.avatarUrl);\n                    //发送获取菜单信息请求\n                    axios.get('/system/menu/findMenu').then((res) => {\n                        //将菜单信息转换成 路由信息\n                        store.commit('setRoutes', res.data);\n                        const menus = formatMneus(res.data);\n                        router.addRoutes([\n                            {\n                                path: '/home',\n                                name: 'home',\n                                component: () => import('@/views/Home.vue'),\n                                children: menus\n                            },\n                        ]);\n                    });\n                    next();\n                }).catch((err) => {\n                    next('/home');\n                });\n            } else {\n                next();\n            }\n        }\n    } else {\n        if (to.path === '/login') {\n            next();\n        } else {\n            next(`/login?redirect=${to.fullPath}`);\n        }\n    }\n});\n\n\n\nexport default router\n"]}]}