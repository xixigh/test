{"remainingRequest":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\node_modules\\babel-loader\\lib\\index.js!C:\\Java\\Java-Code\\healthy\\vue-healthy\\src\\plugins\\premission\\hasRole.js","dependencies":[{"path":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\src\\plugins\\premission\\hasRole.js","mtime":1624797497820},{"path":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Java\\Java-Code\\healthy\\vue-healthy\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKCi8qKg0KICog6KeS6Imy5p2D6ZmQ5aSE55CGDQogKi8KaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkKGVsLCBiaW5kaW5nLCB2Tm9kZSkgewogICAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTsKICAgIHZhciBzdXBlckFkbWluID0gJ1JPTEVfU1VQRVJBRE1JTic7CiAgICB2YXIgcm9sZXMgPSBzdG9yZS5zdGF0ZS5yb2xlczsKCiAgICBpZiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgIHZhciByb2xlRmxhZyA9IHZhbHVlOwogICAgICB2YXIgaGFzUm9sZSA9IHJvbGVzLmZvckVhY2goZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgICByZXR1cm4gc3VwZXJBZG1pbiA9PT0gcm9sZS5hdXRob3JpdHkgfHwgcm9sZUZsYWcuaW5jbHVkZXMocm9sZS5hdXRob3JpdHkpOwogICAgICB9KTsKCiAgICAgIGlmICghaGFzUm9sZSkgewogICAgICAgIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiXHU4QkY3XHU4QkJFXHU3RjZFXHU4OUQyXHU4MjcyXHU2NzQzXHU5NjUwXHU2ODA3XHU3QjdFXHU1MDNDIik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Java/Java-Code/healthy/vue-healthy/src/plugins/premission/hasRole.js"],"names":["store","inserted","el","binding","vNode","value","superAdmin","roles","state","Array","length","roleFlag","hasRole","forEach","role","authority","includes","parentNode","removeChild","Error"],"mappings":";;;;AAAA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,eAAe;AACXC,EAAAA,QADW,oBACFC,EADE,EACEC,OADF,EACWC,KADX,EACkB;AAAA,QACjBC,KADiB,GACPF,OADO,CACjBE,KADiB;AAEzB,QAAMC,UAAU,GAAG,iBAAnB;AACA,QAAMC,KAAK,GAAGP,KAAK,CAACQ,KAAN,CAAYD,KAA1B;;AAEA,QAAIF,KAAK,IAAIA,KAAK,YAAYI,KAA1B,IAAmCJ,KAAK,CAACK,MAAN,GAAe,CAAtD,EAAyD;AACrD,UAAMC,QAAQ,GAAGN,KAAjB;AACA,UAAMO,OAAO,GAAGL,KAAK,CAACM,OAAN,CAAc,UAAAC,IAAI,EAAI;AAClC,eAAOR,UAAU,KAAKQ,IAAI,CAACC,SAApB,IAAiCJ,QAAQ,CAACK,QAAT,CAAkBF,IAAI,CAACC,SAAvB,CAAxC;AACH,OAFe,CAAhB;;AAIA,UAAI,CAACH,OAAL,EAAc;AACVV,QAAAA,EAAE,CAACe,UAAH,IAAiBf,EAAE,CAACe,UAAH,CAAcC,WAAd,CAA0BhB,EAA1B,CAAjB;AACH;AACJ,KATD,MASO;AACH,YAAM,IAAIiB,KAAJ,gEAAN;AACH;AACJ;AAlBU,CAAf","sourcesContent":["/**\r\n * 角色权限处理\r\n */\r\nimport store from '@/store';\r\n\r\nexport default {\r\n    inserted(el, binding, vNode) {\r\n        const { value } = binding;\r\n        const superAdmin = 'ROLE_SUPERADMIN';\r\n        const roles = store.state.roles;\r\n\r\n        if (value && value instanceof Array && value.length > 0) {\r\n            const roleFlag = value;\r\n            const hasRole = roles.forEach(role => {\r\n                return superAdmin === role.authority || roleFlag.includes(role.authority);\r\n            });\r\n\r\n            if (!hasRole) {\r\n                el.parentNode && el.parentNode.removeChild(el);\r\n            }\r\n        } else {\r\n            throw new Error(`请设置角色权限标签值`);\r\n        }\r\n    }\r\n}"]}]}