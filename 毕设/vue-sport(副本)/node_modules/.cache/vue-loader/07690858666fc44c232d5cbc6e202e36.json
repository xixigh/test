{"remainingRequest":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/umlinux/IdeaProjects/毕设/vue-sport/src/views/sport/food/FoodType.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/src/views/sport/food/FoodType.vue","mtime":1625905204000},{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/umlinux/IdeaProjects/毕设/vue-sport/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOiBbJ2FjdGl2ZSddLAogICAgd2F0Y2g6IHsKICAgICAgICBhY3RpdmU6IHsKICAgICAgICAgICAgaGFuZGxlcih2YWwsIG9sZCkgewogICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gJzAnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kUGFnZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+WIneWni+WMluS+pua1iwogICAgICAgICAgICBpbW1lZGlhdGU6IHRydWUKICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBxdWVyeUluZm86IHsKICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nOiAnJywKICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogNQogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+ihqOagvOaVsOaNruW6kwogICAgICAgICAgICB0YWJsZUxpc3Q6IFtdLAogICAgICAgICAgICAvL+aAu+iusOW9leaVsAogICAgICAgICAgICB0b3RhbDogMCwKICAgICAgICAgICAgLy/lr7nor53moYbnirbmgIEKICAgICAgICAgICAgb3BlbjogZmFsc2UsCiAgICAgICAgICAgIC8v5a+56K+d5qGG5qCH6aKYCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgLy/ooajljZUKICAgICAgICAgICAgZGF0YUZvcm06IHt9LAogICAgICAgICAgICAvL+ihqOagvOWKoOi9vQogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgcnVsZXNEYXRhRm9ybTogewogICAgICAgICAgICAgICAgdGl0bGU6IFsKICAgICAgICAgICAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXoj5zlk4HliIbnsbvlkI3np7AiLCB0cmlnZ2VyOiAiYmx1ciJ9LAogICAgICAgICAgICAgICAgICAgIHttaW46IDEsIG1heDogNTAsIG1lc3NhZ2U6ICLplb/luqblnKggMSDliLAgNTAg5Liq5a2X56ymIiwgdHJpZ2dlcjogImJsdXIifSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBpY29uOiBbCiAgICAgICAgICAgICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6I+c5ZOB5YiG57G75Zu+5qCH77yM55So5LqO5bCP56iL5bqP56uv5bGV56S6IiwgdHJpZ2dlcjogImJsdXIifSwKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZmluZFBhZ2UoKSB7CiAgICAgICAgICAgIHRoaXMuJGFqYXgucG9zdCgnL2Zvb2QvdHlwZS9maW5kUGFnZScsIHRoaXMucXVlcnlJbmZvKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICBpZiAoIXJlcy5kYXRhLmZsYWcpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgdGhpcy50YWJsZUxpc3QgPSByZXMuZGF0YS5kYXRhLnJvd3M7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKG5ld1BhZ2VTaXplKSB7CiAgICAgICAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gbmV3UGFnZVNpemU7CiAgICAgICAgICAgIHRoaXMuZmluZFBhZ2UoKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZU51bWJlcikgewogICAgICAgICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlTnVtYmVyID0gbmV3UGFnZU51bWJlcjsKICAgICAgICAgICAgdGhpcy5maW5kUGFnZSgpOwogICAgICAgIH0sCiAgICAgICAgYWRkU2hvdygpIHsKICAgICAgICAgICAgdGhpcy5kYXRhRm9ybSA9IHt9OwogICAgICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgZWRpdERpYWxvZyhyb3cpIHsKICAgICAgICAgICAgdGhpcy5kYXRhRm9ybSA9IHJvdzsKICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZUJ5SWQocm93KSB7CiAgICAgICAgICAgIGlmIChyb3cuZm9vZHMubGVuZ3RoID4gMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+35YWI5Yig6Zmk6K+l5YiG57G75LiL55qE6aOf54mp5ZCO5pON5L2c77yBJyk7CiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpemjn+eJqeWIhuexu+S/oeaBrywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vZGVsZXRl6K+35rGC6YG15b6qcmVzdGZ1bOmjjuagvAogICAgICAgICAgICAgICAgdGhpcy4kYWpheC5kZWxldGUoYC9mb29kL3R5cGUvZGVsZXRlLyR7cm93LmlkfWApLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghcmVzLmRhdGEuZmxhZykgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZFBhZ2UoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyDmiJDlip/liKDpmaTkuLpjb25maXJtIOWPlua2iOS4uiBjYW5jZWwKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oIuaTjeS9nOW3suWPlua2iCIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGRpYWxvZ0Nsb3NlZCgpIHsKICAgICAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybS5yZXNldEZpZWxkcygpOwogICAgICAgIH0sCiAgICAgICAgY2xpY2tDYW5jZWwoKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nQ2xvc2VkKCk7CiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgY2xpY2tPaygpIHsKICAgICAgICAgICAgLy/ooajljZXmoKHpqowKICAgICAgICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfooajljZXmoKHpqozkuI3pgJrov4fvvIzor7forqTnnJ/loavlhpnlkI7mj5DkuqTvvIEnKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAvL+WIpOaWreaYr+S/ruaUuei/mOaYr+a3u+WKoAogICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YUZvcm0uaWQgPT09IG51bGwgfHwgdGhpcy5kYXRhRm9ybS5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgLy/mt7vliqAKICAgICAgICAgICAgICAgICAgICB0aGlzLiRhamF4LnBvc3QoJy9mb29kL3R5cGUvaW5zZXJ0JywgdGhpcy5kYXRhRm9ybSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzLmRhdGEuZmxhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA2MDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8v5L+u5pS5CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWpheC5wb3N0KCcvZm9vZC90eXBlL3VwZGF0ZScsIHRoaXMuZGF0YUZvcm0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5kYXRhLmZsYWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNjAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kUGFnZSgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["FoodType.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FoodType.vue","sourceRoot":"src/views/sport/food","sourcesContent":["<template>\r\n    <div>\r\n        <el-card>\r\n            <el-row :gutter=\"25\">\r\n                <el-col :span=\"10\">\r\n                    <!-- 搜索添加 -->\r\n                    <el-input placeholder=\"请输入搜索内容\" v-model=\"queryInfo.queryString\" clearable @clear=\"findPage\">\r\n                        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"findPage\"/>\r\n                    </el-input>\r\n                </el-col>\r\n                <el-col :span=\"2\">\r\n                    <el-button type=\"primary\" @click=\"addShow\">添加分类</el-button>\r\n                </el-col>\r\n            </el-row>\r\n            <!-- 用户列表 -->\r\n            <el-table :data=\"tableList\" border stripe>\r\n                <el-table-column type=\"index\" label=\"序号\"/>\r\n                <el-table-column label=\"分类名称\" prop=\"title\"/>\r\n                <el-table-column label=\"分类图标\" prop=\"icon\"/>\r\n                <el-table-column label=\"操作\">\r\n                    <template slot-scope=\"scope\">\r\n                        <!-- 修改 -->\r\n                        <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editDialog(scope.row)\"/>\r\n                        <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteById(scope.row)\"/>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- 分页 -->\r\n            <el-pagination\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"queryInfo.pageNumber\"\r\n                    :page-sizes=\"[5, 10, 20, 50]\"\r\n                    :page-size=\"queryInfo.pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"total\"/>\r\n\r\n            <!-- 对话框 -->\r\n            <el-dialog :title=\"title\" v-loading=\"loading\" :visible.sync=\"open\" width=\"50%\" @colse=\"dialogClosed\">\r\n                <el-form :model=\"dataForm\" :rules=\"rulesDataForm\" ref=\"dataForm\" label-width=\"100px\">\r\n                    <el-form-item label=\"菜品名称\" prop=\"title\">\r\n                        <el-input v-model=\"dataForm.title\"/>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"菜品图标\" prop=\"icon\">\r\n                        <el-input v-model=\"dataForm.icon\"/>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"clickCancel\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"clickOk\">确 定</el-button>\r\n                </span>\r\n            </el-dialog>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: ['active'],\r\n        watch: {\r\n            active: {\r\n                handler(val, old) {\r\n                    if (val === '0') {\r\n                        this.findPage();\r\n                    }\r\n                },\r\n                //初始化侦测\r\n                immediate: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                queryInfo: {\r\n                    queryString: '',\r\n                    pageNumber: 1,\r\n                    pageSize: 5\r\n                },\r\n                //表格数据库\r\n                tableList: [],\r\n                //总记录数\r\n                total: 0,\r\n                //对话框状态\r\n                open: false,\r\n                //对话框标题\r\n                title: '',\r\n                //表单\r\n                dataForm: {},\r\n                //表格加载\r\n                loading: false,\r\n                rulesDataForm: {\r\n                    title: [\r\n                        {required: true, message: \"请输入菜品分类名称\", trigger: \"blur\"},\r\n                        {min: 1, max: 50, message: \"长度在 1 到 50 个字符\", trigger: \"blur\"},\r\n                    ],\r\n                    icon: [\r\n                        {required: true, message: \"请输入菜品分类图标，用于小程序端展示\", trigger: \"blur\"},\r\n                    ]\r\n                },\r\n            }\r\n        },\r\n        created() {\r\n        },\r\n        methods: {\r\n            findPage() {\r\n                this.$ajax.post('/food/type/findPage', this.queryInfo).then((res) => {\r\n                    console.log(res);\r\n                    if (!res.data.flag) return this.$message.error(res.data.message);\r\n                    this.tableList = res.data.data.rows;\r\n                    this.total = res.data.data.total;\r\n                });\r\n            },\r\n            handleSizeChange(newPageSize) {\r\n                this.queryInfo.pageSize = newPageSize;\r\n                this.findPage();\r\n            },\r\n            handleCurrentChange(newPageNumber) {\r\n                this.queryInfo.pageNumber = newPageNumber;\r\n                this.findPage();\r\n            },\r\n            addShow() {\r\n                this.dataForm = {};\r\n                this.open = true;\r\n            },\r\n            editDialog(row) {\r\n                this.dataForm = row;\r\n                this.open = true;\r\n            },\r\n            deleteById(row) {\r\n                if (row.foods.length > 0) return this.$message.warning('请先删除该分类下的食物后操作！');\r\n                this.$confirm('此操作将永久删除该食物分类信息, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    //delete请求遵循restful风格\r\n                    this.$ajax.delete(`/food/type/delete/${row.id}`).then((res) => {\r\n                        if (!res.data.flag) return this.$message.error(res.data.message);\r\n                        this.$message.success(res.data.message);\r\n                        this.findPage();\r\n                    });\r\n                }).catch(() => {\r\n                    // 成功删除为confirm 取消为 cancel\r\n                    return this.$message.info(\"操作已取消\");\r\n                });\r\n            },\r\n            dialogClosed() {\r\n                //清空表单\r\n                this.$refs.dataForm.resetFields();\r\n            },\r\n            clickCancel() {\r\n                this.dialogClosed();\r\n                this.open = false;\r\n            },\r\n            clickOk() {\r\n                //表单校验\r\n                this.$refs.dataForm.validate((valid) => {\r\n                    if (!valid) return this.$message.error('表单校验不通过，请认真填写后提交！');\r\n                    this.loading = true;\r\n                    //判断是修改还是添加\r\n                    if (this.dataForm.id === null || this.dataForm.id === undefined) {\r\n                        //添加\r\n                        this.$ajax.post('/food/type/insert', this.dataForm).then((res) => {\r\n                            if (!res.data.flag) {\r\n                                setTimeout(() => {\r\n                                    this.loading = false;\r\n                                }, 6000);\r\n                                return this.$message.error(res.data.message);\r\n                            }\r\n                            this.open = false;\r\n                            this.loading = false;\r\n                            this.$message.success(res.data.message);\r\n                            this.findPage();\r\n                        });\r\n                    } else {\r\n                        //修改\r\n                        this.$ajax.post('/food/type/update', this.dataForm).then((res) => {\r\n                            if (!res.data.flag) {\r\n                                setTimeout(() => {\r\n                                    this.loading = false;\r\n                                }, 6000);\r\n                                return this.$message.error(res.data.message);\r\n                            }\r\n                            this.open = false;\r\n                            this.loading = false;\r\n                            this.$message.success(res.data.message);\r\n                            this.findPage();\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]}]}